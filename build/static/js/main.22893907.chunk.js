(this["webpackJsonpfullstack-banking-app"]=this["webpackJsonpfullstack-banking-app"]||[]).push([[0],{155:function(e,t,a){},156:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),o=a.n(c),s=a(8),l=a(10),u=a.n(l),i=a(15),p=a(25),m=a(17),d=a(11),h=a(12),f=a(13),E=a(14),v=a(157),b=a(158),g=a(5),_=a.n(g),y=a(9),w=a(21),S=a.n(w),O="http://localhost:5000",k=function(e){return{type:"GET_ERRORS",errors:e}},C=a(72),j=a.n(C),M=a(26),N=a(73),A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN":return t.user;case"SIGN_OUT":return{};default:return e}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.errors;case"RESET_ERRORS":return{};default:return e}},D=a(24),x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_PROFILE":return Object(D.a)({},t.profile);default:return e}},T=(a(41),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||M.d),R=Object(M.e)(Object(M.c)({auth:A,errors:I,profile:x}),T(Object(M.a)(N.a))),L=function(e){return e.every((function(e){return""!==Object.values(e)[0]}))},G=function(e){var t=e.userid,a=e.email;R.dispatch(z({userid:t,email:a,token:localStorage.getItem("user_token")})),R.dispatch(H(a))},U=function(){var e=localStorage.getItem("user_token");e&&(S.a.defaults.headers.common.Authorization="Bearer ".concat(e))},Y=function(){delete S.a.defaults.headers.common.Authorization},P=function(){var e=Object(y.a)(_.a.mark((function e(t,a){var n,r,c,o=arguments;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(o.length>2&&void 0!==o[2])||o[2],r=o.length>3&&void 0!==o[3]&&o[3],n&&U(),e.next=5,S.a.get(t,a);case 5:return c=e.sent,r&&Y(),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),F=function(){var e=Object(y.a)(_.a.mark((function e(t,a){var n,r,c,o=arguments;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(o.length>2&&void 0!==o[2])||o[2],r=o.length>3&&void 0!==o[3]&&o[3],n&&U(),e.next=5,S.a.post(t,a);case 5:return c=e.sent,r&&Y(),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),B=function(){var e=Object(y.a)(_.a.mark((function e(t,a){var n,r,c,o=arguments;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(o.length>2&&void 0!==o[2])||o[2],r=o.length>3&&void 0!==o[3]&&o[3],n&&U(),e.next=5,S.a.patch(t,a);case 5:return c=e.sent,r&&Y(),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),q=function(e){return{type:"UPDATE_PROFILE",profile:e}},W=function(e){return function(){var t=Object(y.a)(_.a.mark((function t(a){var n;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,F("".concat(O,"/profile"),e);case 3:n=t.sent,a(q(n.data)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),t.t0.response&&a(k(t.t0.response.data));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},H=function(){return function(){var e=Object(y.a)(_.a.mark((function e(t){var a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P("".concat(O,"/profile"));case 3:a=e.sent,t(q(a.data)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0.response&&t(k(e.t0.response.data));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},z=function(e){return{type:"SIGN_IN",user:e}},J=function(e,t){return function(){var a=Object(y.a)(_.a.mark((function a(n){var r,c;return _.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,S.a.post("".concat(O,"/signin"),{email:e,password:t});case 3:r=a.sent,c=r.data,localStorage.setItem("user_token",c.token),n(z(c)),n(H(c.email)),Ae.push("/profile"),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(0),console.log("error",a.t0),a.t0.response&&n(k(a.t0.response.data));case 15:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e){return a.apply(this,arguments)}}()},X=function(e){return function(){var t=Object(y.a)(_.a.mark((function t(a){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.a.post("".concat(O,"/signup"),e);case 3:return t.abrupt("return",{success:!0});case 6:return t.prev=6,t.t0=t.catch(0),console.log("error",t.t0),t.t0.response&&a(k(t.t0.response.data)),t.abrupt("return",{success:!1});case 11:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()},K=a(23),V=function(e){Object(E.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:"",errorMsg:""},e.handleLogin=function(t){t.preventDefault();var a=e.state,n=a.email,r=a.password;L([{email:n},{password:r}])?(e.setState({errorMsg:{signin_error:""}}),e.props.dispatch(J(n,r))):e.setState({errorMsg:{signin_error:"Please enter all the fields."}})},e.handleInputChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(m.a)({},n,r))},e}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(e){u.a.isEqual(e.errors,this.props.errors)||this.setState({errorMsg:this.props.errors})}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"RESET_ERRORS"})}},{key:"render",value:function(){var e=this.state.errorMsg;return r.a.createElement("div",{className:"login-page"},r.a.createElement("h1",null,"Banking Application"),r.a.createElement("div",{className:"login-form"},r.a.createElement(v.a,{onSubmit:this.handleLogin},e&&e.signin_error&&r.a.createElement("p",{className:"errorMsg centered-message"},e.signin_error),r.a.createElement(v.a.Group,{controlId:"email"},r.a.createElement(v.a.Label,null,"Email address"),r.a.createElement(v.a.Control,{type:"email",name:"email",placeholder:"Enter email",onChange:this.handleInputChange})),r.a.createElement(v.a.Group,{controlId:"password"},r.a.createElement(v.a.Label,null,"Password"),r.a.createElement(v.a.Control,{type:"password",name:"password",placeholder:"Enter password",onChange:this.handleInputChange})),r.a.createElement("div",{className:"action-items"},r.a.createElement(b.a,{variant:"primary",type:"submit"},"Login"),r.a.createElement(K.a,{to:"/register",className:"btn btn-secondary"},"Create account")))))}}]),a}(r.a.Component),Q=Object(s.b)((function(e){return{errors:e.errors}}))(V),Z=function(e){Object(E.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={first_name:"",last_name:"",email:"",password:"",cpassword:"",successMsg:"",errorMsg:"",isSubmitted:!1},e.registerUser=function(t){t.preventDefault();var a=e.state,n=a.first_name,r=a.last_name,c=a.email,o=a.password,s=a.cpassword;L([{first_name:n},{last_name:r},{email:c},{password:o},{cpassword:s}])?o!==s?e.setState({errorMsg:{signup_error:"Password and confirm password does not match."}}):(e.setState({isSubmitted:!0}),e.props.dispatch(X({first_name:n,last_name:r,email:c,password:o})).then((function(t){t.success&&e.setState({successMsg:"User registered successfully.",errorMsg:""})}))):e.setState({errorMsg:{signup_error:"Please enter all the fields."}})},e.handleInputChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(m.a)({},n,r))},e}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(e){u.a.isEqual(e.errors,this.props.errors)||this.setState({errorMsg:this.props.errors})}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"RESET_ERRORS"})}},{key:"render",value:function(){var e=this.state,t=e.errorMsg,a=e.successMsg,n=e.isSubmitted;return r.a.createElement("div",{className:"login-page"},r.a.createElement("h2",null,"Register User"),r.a.createElement("div",{className:"login-form"},r.a.createElement(v.a,{onSubmit:this.registerUser},t&&t.signup_error?r.a.createElement("p",{className:"errorMsg centered-message"},t.signup_error):n&&r.a.createElement("p",{className:"successMsg centered-message"},a),r.a.createElement(v.a.Group,{controlId:"first_name"},r.a.createElement(v.a.Label,null,"First name"),r.a.createElement(v.a.Control,{type:"text",name:"first_name",placeholder:"Enter first name",onChange:this.handleInputChange})),r.a.createElement(v.a.Group,{controlId:"last_name"},r.a.createElement(v.a.Label,null,"Last name"),r.a.createElement(v.a.Control,{type:"text",name:"last_name",placeholder:"Enter last name",onChange:this.handleInputChange})),r.a.createElement(v.a.Group,{controlId:"email"},r.a.createElement(v.a.Label,null,"Email address"),r.a.createElement(v.a.Control,{type:"email",name:"email",placeholder:"Enter email",onChange:this.handleInputChange})),r.a.createElement(v.a.Group,{controlId:"password"},r.a.createElement(v.a.Label,null,"Password"),r.a.createElement(v.a.Control,{type:"password",name:"password",placeholder:"Enter password",onChange:this.handleInputChange})),r.a.createElement(v.a.Group,{controlId:"cpassword"},r.a.createElement(v.a.Label,null,"Confirm password"),r.a.createElement(v.a.Control,{type:"password",name:"cpassword",placeholder:"Enter confirm password",onChange:this.handleInputChange})),r.a.createElement("div",{className:"action-items"},r.a.createElement(b.a,{variant:"primary",type:"submit"},"Register"),r.a.createElement(K.a,{to:"/",className:"btn btn-secondary"},"Login")))))}}]),a}(r.a.Component),$=Object(s.b)((function(e){return{errors:e.errors}}))(Z),ee=function(e){Object(E.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={first_name:"",last_name:"",email:"",errorMsg:"",isSubmitted:!1},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n=a.first_name,r=a.last_name,c={first_name:n,last_name:r};L([{first_name:n},{last_name:r}])?(e.setState({isSubmitted:!0,errorMsg:""}),e.props.dispatch(W(c))):e.setState({errorMsg:{update_error:"Please enter all the fields."}})},e.handleOnChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(m.a)({},n,r))},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.profile;if(!u.a.isEmpty(e)){var t=e.first_name,a=e.last_name,n=e.email;this.setState({first_name:t,last_name:a,email:n})}}},{key:"componentDidUpdate",value:function(e){if(u.a.isEqual(e.errors,this.props.errors)||this.setState({errorMsg:this.props.errors}),!u.a.isEqual(e.profile,this.props.profile)){var t=this.props.profile,a=t.first_name,n=t.last_name,r=t.email;this.setState({first_name:a,last_name:n,email:r})}}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"RESET_ERRORS"})}},{key:"render",value:function(){var e=this.state,t=e.errorMsg,a=e.first_name,n=e.last_name,c=e.email,o=e.isSubmitted;return r.a.createElement("div",{className:"col-md-6 offset-md-3"},r.a.createElement(v.a,{onSubmit:this.handleSubmit,className:"profile-form"},t&&t.update_error?r.a.createElement("p",{className:"errorMsg centered-message"},t.update_error):o&&r.a.createElement("p",{className:"successMsg centered-message"},"Profile updated successfully."),r.a.createElement(v.a.Group,{controlId:"email"},r.a.createElement(v.a.Label,null,"Email address:"),r.a.createElement("span",{className:"label-value"},c)),r.a.createElement(v.a.Group,{controlId:"first_name"},r.a.createElement(v.a.Label,null,"First name:"),r.a.createElement(v.a.Control,{type:"text",name:"first_name",placeholder:"Enter your first name",value:a,onChange:this.handleOnChange})),r.a.createElement(v.a.Group,{controlId:"last_name"},r.a.createElement(v.a.Label,null,"Last name:"),r.a.createElement(v.a.Control,{type:"text",name:"last_name",placeholder:"Enter your last name",value:n,onChange:this.handleOnChange})),r.a.createElement(b.a,{variant:"primary",type:"submit"},"Submit")))}}]),a}(r.a.Component),te=Object(s.b)((function(e){return{profile:e.profile,errors:e.errors}}))(ee),ae=function(){return r.a.createElement("header",null,r.a.createElement("h1",null,"Banking Application"),r.a.createElement("div",{className:"links"},r.a.createElement(K.a,{to:"/account",className:"link"},"Account"),r.a.createElement(K.a,{to:"/profile",className:"link"},"Profile"),r.a.createElement(K.a,{to:"/logout",className:"link"},"Logout")))},ne=function(e){Object(E.a)(a,e);var t=Object(f.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.history;(0,e.dispatch)(function(){var e=Object(y.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F("".concat(O,"/logout"),!0,!0);case 3:return localStorage.removeItem("user_token"),e.abrupt("return",t({type:"SIGN_OUT"}));case 7:e.prev=7,e.t0=e.catch(0),e.t0.response&&t(k(e.t0.response.data));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()).then((function(){return t.push("/")}))}},{key:"render",value:function(){return null}}]),a}(r.a.Component),re=Object(s.b)()(ne),ce=function(e){return{type:"SET_ACCOUNt",accountDetails:e}},oe=function(e,t){return{type:"UPDATE_ACCOUNT",amountToChange:e,operation:t}},se=function(){return function(){var e=Object(y.a)(_.a.mark((function e(t){var a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P("".concat(O,"/account"));case 3:return a=e.sent,e.abrupt("return",t(ce(a.data)));case 7:e.prev=7,e.t0=e.catch(0),e.t0.response&&t(k(e.t0.response.data));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},le=function(e,t,a){return function(){var n=Object(y.a)(_.a.mark((function n(r){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,F("".concat(O,"/account"),{account_no:e,bank_name:t,ifsc:a});case 3:return n.abrupt("return",n.sent);case 6:n.prev=6,n.t0=n.catch(0),n.t0.response&&r(k(n.t0.response.data));case 9:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(e){return n.apply(this,arguments)}}()},ue=function(e){return function(){var t=Object(y.a)(_.a.mark((function t(a){var n;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B("".concat(O,"/account"),{ifsc:e});case 3:n=t.sent,a(ce(n.data)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),t.t0.response&&a(k(t.t0.response.data));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},ie=a(76),pe=a.n(ie),me=function(e){return{type:"ADD_TRANSACTION",transaction:e}},de=function(e,t){return function(){var a=Object(y.a)(_.a.mark((function a(n){var r;return _.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r={transaction_date:new Date,deposit_amount:t},a.next=4,F("".concat(O,"/deposit/").concat(e),r);case 4:n(me(Object(D.a)({},r,{withdraw_amount:null}))),n(oe(t,"deposit")),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),a.t0.response&&n(k(a.t0.response.data));case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()},he=function(e,t){return function(){var a=Object(y.a)(_.a.mark((function a(n){var r;return _.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r={transaction_date:new Date,withdraw_amount:t},a.next=4,F("".concat(O,"/withdraw/").concat(e),r);case 4:n(me(Object(D.a)({},r,{deposit_amount:null}))),n(oe(t,"withdraw")),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),a.t0.response&&n(k(a.t0.response.data));case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()},fe=function(e,t,a){return function(){var n=Object(y.a)(_.a.mark((function n(r){var c,o;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c=t&&a?"".concat(O,"/transactions/").concat(e,"?start_date=").concat(t,"&end_date=").concat(a):"".concat(O,"/transactions/").concat(e),n.next=4,P(c);case 4:o=n.sent,r({type:"SET_TRANSACTIONS",transactions:o.data}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),n.t0.response&&r(k(n.t0.response.data));case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()},Ee=function(e,t,a){return function(){var n=Object(y.a)(_.a.mark((function n(r){var c;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,P("".concat(O,"/download/").concat(e,"?start_date=").concat(t,"&end_date=").concat(a),{responseType:"blob"});case 3:return c=n.sent,n.abrupt("return",pe()(c.data,"transactions.pdf","application/pdf"));case 7:n.prev=7,n.t0=n.catch(0),n.t0.response&&400===n.t0.response.status&&r(k({transactions_error:"Error while downloading..Try again later."}));case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},ve=function(e){return e.slice(-4).padStart(e.length,"*")},be=function(e){Object(E.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={account_no:"",bank_name:"",ifsc:"",errorMsg:""},e.handleInputChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(m.a)({},n,r))},e.handleAddAccount=function(t){t.preventDefault();var a=e.state,n=a.account_no,r=a.bank_name,c=a.ifsc;L([{account_no:n},{bank_name:r},{ifsc:c}])?e.props.handleAddAccount(e.state):e.setState({errorMsg:{add_error:"Please enter all the fields."}})},e}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(e,t){u.a.isEqual(e.errors,this.props.errors)||this.setState({errorMsg:this.props.errors})}},{key:"render",value:function(){var e=this.state,t=e.account_no,a=e.bank_name,n=e.ifsc,c=e.errorMsg;return r.a.createElement("div",{className:"edit-account-form  col-md-6 offset-md-3"},r.a.createElement(v.a,{onSubmit:this.handleAddAccount,className:"account-form"},c&&c.add_error&&r.a.createElement("p",{className:"errorMsg centered-message"},c.add_error),r.a.createElement(v.a.Group,{controlId:"type"},r.a.createElement(v.a.Label,null,"Add account")),r.a.createElement("hr",null),r.a.createElement(v.a.Group,{controlId:"accnt_no"},r.a.createElement(v.a.Label,null,"Account number: "),r.a.createElement(v.a.Control,{type:"text",name:"account_no",placeholder:"Enter your account number",value:t,onChange:this.handleInputChange})),r.a.createElement(v.a.Group,{controlId:"accnt_no"},r.a.createElement(v.a.Label,null,"Bank name: "),r.a.createElement(v.a.Control,{type:"text",name:"bank_name",placeholder:"Enter your bank name",value:a,onChange:this.handleInputChange})),r.a.createElement(v.a.Group,{controlId:"ifsc"},r.a.createElement(v.a.Label,null,"IFSC Code:"),r.a.createElement(v.a.Control,{type:"text",name:"ifsc",placeholder:"Enter new IFSC code",value:n,onChange:this.handleInputChange})),r.a.createElement(b.a,{variant:"primary",type:"submit"},"Submit")))}}]),a}(r.a.Component),ge=Object(s.b)((function(e){return{errors:e.errors}}))(be),_e=function(e){Object(E.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={amount:"",account:e.props.account,editAccount:!1,ifsc:"",errorMsg:""},e.handleUpdateAccount=function(t){L([{ifsc:t}])?(e.setState({errorMsg:""}),e.props.dispatch(ue(t))):e.setState({errorMsg:{update_error:"Please enter ifsc code."}})},e.handleAmountChange=function(t){e.setState({amount:t.target.value})},e.handleEditAccount=function(t){t.preventDefault(),e.setState((function(e){return{editAccount:!e.editAccount}}))},e.handleInputChange=function(t){e.setState({ifsc:t.target.value})},e.handleOnSubmit=function(t){t.preventDefault();var a=e.state,n=a.amount,r=a.account,c=e.props.selectedType;if(L([{amount:n}])){var o=r.total_balance;n=+n,o=+o,"withdraw"===c&&n<=o?(e.props.dispatch(he(r.account_id,n)),e.setState({errorMsg:""})):"deposit"===c?(e.props.dispatch(de(r.account_id,n)),e.setState({errorMsg:""})):e.setState({errorMsg:Object(m.a)({},"withdraw"===c?"withdraw_error":"add_error","You don't have enough balance in your account")})}else e.setState({errorMsg:Object(m.a)({},"withdraw"===c?"withdraw_error":"add_error","Please enter an amount.")})},e.handleAddAccount=function(t){var a=t.account_no,n=t.bank_name,r=t.ifsc;e.props.dispatch(le(a,n,r)).then((function(){return e.props.dispatch(se())}))},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.props.email&&this.props.dispatch(se())}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"RESET_ERRORS"})}},{key:"componentDidUpdate",value:function(e){u.a.isEqual(e.account,this.props.account)||this.setState({account:this.props.account}),u.a.isEqual(e.errors,this.props.errors)||this.setState({errorMsg:this.props.errors})}},{key:"render",value:function(){var e=this,t=this.props.selectedType,a=this.state,n=a.editAccount,c=a.ifsc,o=a.errorMsg,s=a.account,l=s.account_no?ve(s.account_no):"",u=t.charAt(0).toUpperCase()+t.slice(1);return l?n?r.a.createElement("div",{className:"edit-account-form  col-md-6 offset-md-3"},r.a.createElement("h3",null,"Account details",r.a.createElement("a",{href:"/#",className:"edit-account",onClick:this.handleEditAccount},"Go Back")),r.a.createElement("hr",null),r.a.createElement(v.a,null,o&&o.update_error&&r.a.createElement("p",{className:"errorMsg"},o.update_error),r.a.createElement(v.a.Group,{controlId:"acc_no"},r.a.createElement(v.a.Label,null,"Account number:"),r.a.createElement("span",{className:"label-value"},s&&l)),r.a.createElement(v.a.Group,{controlId:"bank_name"},r.a.createElement(v.a.Label,null,"Bank name:"),r.a.createElement("span",{className:"label-value"},s&&s.bank_name)),r.a.createElement(v.a.Group,{controlId:"ifsc"},r.a.createElement(v.a.Label,null,"IFSC code:"),r.a.createElement("span",{className:"label-value"},s&&s.ifsc),r.a.createElement(v.a.Control,{type:"text",placeholder:"Enter new IFSC code",value:c,onChange:this.handleInputChange})),r.a.createElement(b.a,{variant:"primary",onClick:function(){return e.handleUpdateAccount(c)}},"Update details"))):r.a.createElement("div",{className:"account-form col-md-6 offset-md-3"},o&&o.withdraw_error&&r.a.createElement("p",{className:"errorMsg"},o.withdraw_error),o&&o.add_error&&r.a.createElement("p",{className:"errorMsg"},o.add_error),r.a.createElement(v.a,{onSubmit:this.handleOnSubmit,className:"account-form"},r.a.createElement(v.a.Group,{controlId:"type"},r.a.createElement(v.a.Label,null,u),r.a.createElement("a",{href:"/#",className:"edit-account",onClick:this.handleEditAccount},"Edit Account Details")),r.a.createElement("hr",null),r.a.createElement(v.a.Group,{controlId:"accnt_no"},r.a.createElement(v.a.Label,null,"Account number: "),r.a.createElement("span",{className:"label-value"},s&&l)),r.a.createElement(v.a.Group,{controlId:"accnt_no"},r.a.createElement(v.a.Label,null,"Available balance: "),r.a.createElement("span",{className:"label-value"},s&&s.total_balance)),r.a.createElement(v.a.Group,{controlId:"amount"},r.a.createElement(v.a.Label,null,"Amount:"),r.a.createElement(v.a.Control,{type:"number",placeholder:"Enter amount to ".concat(t),value:this.state.amount,onChange:this.handleAmountChange})),r.a.createElement(b.a,{variant:"primary",type:"submit"},"Submit"))):r.a.createElement(ge,{handleAddAccount:this.handleAddAccount})}}]),a}(r.a.Component),ye=Object(s.b)((function(e){return{email:e.auth&&e.auth.email,account:e.account,errors:e.errors}}))(_e),we=a(27),Se=a.n(we),Oe=a(29),ke=function(e){var t=e.transactions;return r.a.createElement("div",{className:"report-table"},r.a.createElement(Oe.BootstrapTable,{data:t,striped:!0,hover:!0,pagination:!0},r.a.createElement(Oe.TableHeaderColumn,{isKey:!0,dataField:"formatted_date"},"Date"),r.a.createElement(Oe.TableHeaderColumn,{dataField:"deposit_amount"},"Deposits"),r.a.createElement(Oe.TableHeaderColumn,{dataField:"withdraw_amount"},"Withdrawals"),r.a.createElement(Oe.TableHeaderColumn,{dataField:"balance"},"Balance")))},Ce=function(e){Object(E.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={startDate:new Date,endDate:new Date,transactions:[],isDownloading:!1,formSubmitted:!1,errorMsg:""},e.handleStartDateChange=function(t){e.setState({startDate:t})},e.handleEndDateChange=function(t){e.setState({endDate:t})},e.handleSubmit=function(t){t.preventDefault(),e.setState({formSubmitted:!0});var a=e.state,n=a.startDate,r=a.endDate,c=Se()(n).format("YYYY-MM-DD"),o=Se()(r).format("YYYY-MM-DD"),s=e.props.account;e.props.dispatch(fe(s.account_id,c,o))},e.downloadReport=function(t,a,n){a=Se()(a).format("YYYY-MM-DD"),n=Se()(n).format("YYYY-MM-DD"),e.setState({isDownloading:!0,errorMsg:""}),e.props.dispatch(Ee(t,a,n)).then((function(){return e.setState({isDownloading:!1})}))},e.handleAddAccount=function(t){var a=t.account_no,n=t.bank_name,r=t.ifsc;e.props.dispatch(le(a,n,r))},e}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(e){u.a.isEqual(e.transactions,this.props.transactions)||this.setState({transactions:this.props.transactions}),u.a.isEqual(e.errors,this.props.errors)||this.setState({errorMsg:this.props.errors})}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"RESET_ERRORS"})}},{key:"render",value:function(){var e=this,t=this.props.account,a=this.state,n=a.startDate,c=a.endDate,o=a.transactions,s=a.isDownloading,l=a.formSubmitted,i=a.errorMsg,p=t.account_no?ve(t.account_no):"";return p?r.a.createElement("div",{className:"summary-form"},r.a.createElement("p",null,"Transaction History"),i&&i.transactions_error&&r.a.createElement("p",{className:"errorMsg",style:{maxWidth:"unset"}},i.transactions_error),r.a.createElement(v.a,{onSubmit:this.handleSubmit},r.a.createElement(v.a.Group,{controlId:"acc_no"},r.a.createElement(v.a.Label,null,"Account number:"),r.a.createElement("span",{className:"label-value"},t&&p)),r.a.createElement(v.a.Group,{controlId:"bank_name"},r.a.createElement(v.a.Label,{className:"label"},"Start date"),"// />"),r.a.createElement(v.a.Group,{controlId:"bank_name"},r.a.createElement(v.a.Label,{className:"label"},"End date"),"//"),r.a.createElement(b.a,{variant:"primary",type:"submit",className:"btn-report"},"Generate Report")),o.length>0?r.a.createElement("div",{className:"transactions-section"},s?r.a.createElement("p",{className:"loading"},"Downloading..."):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"main-info"},r.a.createElement("p",null,"Account number: ",p),r.a.createElement("p",null,"Bank name: ",t.bank_name),r.a.createElement("p",null,"IFSC code: ",t.ifsc),r.a.createElement("p",null,"Total available balance: ",t.total_balance)),r.a.createElement(b.a,{variant:"primary",type:"button",onClick:function(){return e.downloadReport(t.account_id,n,c)}},"Download Report"),r.a.createElement("h5",null,"Detailed transactions between"," ",Se()(n).format("Do MMMM YYYY")," and"," ",Se()(c).format("Do MMMM YYYY")),r.a.createElement(ke,{transactions:o}))):l&&u.a.isEmpty(i)&&r.a.createElement("p",null,"No transactions found within selected date range.")):r.a.createElement(ge,{handleAddAccount:this.handleAddAccount})}}]),a}(r.a.Component),je=Object(s.b)((function(e){return{account:e.account,transactions:e.transactions,errors:e.errors}}))(Ce),Me=function(e){Object(E.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={selectedType:"withdraw"},e.setSelectedType=function(t){e.setState({selectedType:t})},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this,t=this.state.selectedType;return r.a.createElement("div",null,r.a.createElement("div",{className:"account"},r.a.createElement(b.a,{variant:"primary",className:"".concat("withdraw"===t?"active account-btn":"account-btn"),onClick:function(){return e.setSelectedType("withdraw")}},"Withdraw"),r.a.createElement(b.a,{variant:"secondary",className:"".concat("deposit"===t?"active account-btn":"account-btn"),onClick:function(){return e.setSelectedType("deposit")}},"Deposit"),r.a.createElement(b.a,{variant:"info",className:"".concat("summary"===t?"active account-btn":"account-btn"),onClick:function(){return e.setSelectedType("summary")}},"Summary")),r.a.createElement("div",null,"withdraw"===t||"deposit"===t?r.a.createElement(ye,{selectedType:t}):r.a.createElement(je,null)))}}]),a}(r.a.Component),Ne=Object(s.b)()(Me),Ae=Object(i.a)(),Ie=Object(s.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.auth;return r.a.createElement(p.b,{history:Ae},r.a.createElement("div",null,!u.a.isEmpty(t.token)&&r.a.createElement(ae,null),r.a.createElement("div",{className:"container"},r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/",component:Q,exact:!0}),r.a.createElement(p.a,{path:"/register",component:$}),r.a.createElement(p.a,{path:"/profile",component:te}),r.a.createElement(p.a,{path:"/logout",component:re}),r.a.createElement(p.a,{path:"/account",component:Ne})))))}));a(153),a(154),a(155);!function(){var e=localStorage.getItem("user_token");if(e){var t=window.location.pathname;"/"!==t&&"/register"!==t||Ae.push("/profile");var a=j()(e);G(a)}else Ae.push("/")}();var De=document.getElementById("root");o.a.render(r.a.createElement(s.a,{store:R},r.a.createElement(Ie,null)),De)},77:function(e,t,a){e.exports=a(156)}},[[77,1,2]]]);
//# sourceMappingURL=main.22893907.chunk.js.map